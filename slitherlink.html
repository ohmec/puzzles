<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:Bold,400|Hina+Mincho"/>
    <link rel="stylesheet" href="./puzzles.css" />
    <script type="application/javascript" src="./fastclick.js"></script>
    <script type="text/javascript" src="./render.js"></script>
    <script type="text/javascript" src="./slpuzzles.js"></script>
    <script type="text/javascript" src="./slitherlink.js"></script>
    <script src="./jquery.js"></script>
    <title>Slitherlink Player</title>
  </head>
  <body>
    <div id="banner">
      <a href="index.html">Ohmec Puzzles</a><br/>
      Player for Slitherlink <span id="jpfont">&#x30B9;&#x30EA;&#x30B6;&#x30FC;&#x30E7;&#x30F3;&#x30AF;</span>
    </div>
    <div id="tabContainer">
      <ul id="tabs">
        <li class="active"><a href="#tab1">Game Play   </a></li>
        <li>               <a href="#tab2">Rules       </a></li>
        <li>               <a href="#tab3">Puzzles     </a></li>
        <li>               <a href="#tab4">About       </a></li>
      </ul>
    </div>
    <div id="tabsContent">
      <div id="tab1" class="tab_content" style="display: block;">
        <p>
          To play, left-click on a border between cells to create a line
          between vertices, or right-click to remove a line. You can drag
          around to continue to draw the line, or erase the line. Alternately,
          once on a boundary, you can shift-move to add more borders in the
          direction of arrow keys. Additionally, if the cursor is on a wall,
          you can press the space bar to toggle the wall state, or press
          '1' to set, or '0' or backspace to clear. You can use the
          middle-click on a line to add an '&#xD7;' in a line space,
          indicating that it is marked as disabled, i.e. determined by
          the user to not be able to contain a line. Meanwhile you can
          also click on a cell to toggle its color between the
          default white, and gray. This has no influence on the solving
          of the puzzle, but can help visualize the cells in between the
          lines of the full final loop (see rules). A right-click on a
          cell clears it back to white. Also, once on a cell, you can
          move around the board and press '1' to set a cell gray, or
          '0' or backspace to return to white.
        </p>
        <p>
          In Assist Mode (0), the default, only the existance of errors
          or incomplete numbers is indicated.  In Assist Mode (1), the
          number of errors and incomplete numbers is indicated, see game rules.
          In Assist Mode (2) errors are highlighted with cell or digit
          colors, and correct completed numbers are indicated as well. Note 
          this does not ensure that they are correct in the final solution,
          just that they are correct with respect to the rules. In some cases
          the solve difficulty will greatly decrease in Assist Mode (1) or
          higher, so select depending upon the level of challenge desired.
          The game border will turn green if the grid is completed without
          error.  You can click the "undo" button on the bottom of the page
          to undo previous moves.
        </p>
        <p>
          Below, enter puzzle code (0-<span id='puzzlecount1'>0</span>)
          for one of a list of pre-defined puzzles, or a puzzle descriptor
          (see "Puzzles" tab). Puzzle code 0 shows an example completed
          puzzle that can be helpful. The following puzzle codes have demos,
          which will walk you through a solve to help you on the path to
          mastery: <span id='demolist1'>[]</span>).
        </p>
      </div>
      <div id="tab2" class="tab_content" style="display: none;">
        <a href="https://www.nikoli.co.jp/en/puzzles/slitherlink" target="_blank">Slitherlink</a>
        (<span id="jpfont">&#x30B9;&#x30EA;&#x30B6;&#x30FC;&#x30E7;&#x30F3;&#x30AF;</span>)
        is a classic Japanese logic puzzle published by 
        <a href="https://www.nikoli.co.jp/en" target="_blank">Nikoli</a>.
        In Slitherlink, the board begins with a set of cell vertices, with
        many of the cells containing numbers indicating how many lines
        between vertices must border that cell. The full set of rules below
        involve these lines and the numbers and how to complete a solve.
        <ol>
          <li>
            A cell with a number within it must contain that number (between
            zero and three) of lines on its borders. Cells without numbers
            can have any number of lines.
          </li>
          <li>
            The lines between cells must connect to form a complete loop
            around the board that never crosses or touches itself.
          </li>
          <li>
            There can only be one complete loop in a successful solution.
          </li>
      </div>
      <div id="tab3" class="tab_content" style="display: none;">
        <p>
          Puzzles can be invoked by either a numerical entry from
          0-<span id='puzzlecount2'>0</span>, or through a character
          description of the puzzle itself, entered into the Display
          form on the 'Game Play' tab. The numbered puzzles are
          hand-crafted of varying difficulty, roughly easy to hard.
          Puzzle 0 shows a completed correct puzzle.
        </p>
        <p>
          To describe a puzzle, the character string must be of the
          form: "WxH:&lt;digit-descriptor&gt;", where W is a number
          indicating the width of the grid, and H the height.
          The digit descriptor is a list of the pre-defined
          digit contents (0-3), from left to right, then top to bottom.
          Blank cells are represented with a '-' character. To assist
          in the definition of a sparse board, a combination of <i>b</i>
          consecutive blanks can be represented with a lowercase letter
          from 'a' to 'z', corresponding to 1 to 26 consecutive blanks.
          Digit values greater than '9' should be represented with
          capital letters 'A' to 'Z' representing 10 to 35.  A dot '.'
          can be used as a visual separator, for example between rows.
          An example descriptor is as follows for entry 1:
          '<span id="descr1">descr</span>'.
        </p>
        <p>
          For Slitherlink there are <span id='democount'>1</span> demo
          puzzles that can be helpful to walk through solving methods.
          They are puzzle codes <span id='demolist2'>[]</span>.
          Enter them in the Game Play tab with the code number and there
          will be added a demo panel to help with the solve.
        </p>
      </div>
      <div id="tab4" class="tab_content" style="display: none;">
        This playground was written using javascript and is available open
        source. All code is checked into the github repo at
        <a href="https://github.com/ohmec/puzzles">ohmec/puzzles</a>.
        Feel free to file bugs there!
      </div>
    </div>
    <div id="puzzleEntry">
      <center>
      <input type="text"                          id="userPuzzle"    size="40" />
      <input type="button" value="Display Puzzle" id="displayButton" class="button small" />
      </center>
    </div>
    <br />
    <div id="puzzleInterface">
      <div id="canvasDiv" style="border-color: black;">
        <canvas id="puzzleCanvas" class="fastclick" height="270" width="270" style="border-color: black;"></canvas>
      </div>    
      <br />
      <script type="text/javascript">
        let canvas = document.querySelector(".fastclick");
        new FastClick(canvas);
      </script>
      <br />
      <div id="buttonsDiv">
        <input class="button small" type="button" value="Undo"  id="undoButton"  />
        <input class="button small" type="button" value="Reset" id="resetButton" />
        <input class="button small" type="button" value="Current Assist Mode (0)" id="assistButton" />
        <input class="button small" type="button" value="Clear Ribbons" id="clearButton" style="display: none" />
        <p><span id='puzzledescr'></span></p>
        <p><span id='errortext'></span></p>
      </div>
    </div>
    <div id="demotab" style="display: none;">
      <input class="button small" type="button" value="prev" id="prevDemoButton"  />
      <input class="button small" type="button" value="next" id="nextDemoButton" />
      <p id='demop'><span id='demotext'></span></p>
    </div>
    <div id="ribbonbar">
      &nbsp;
    </div>
    <!-- some space to avoid the canvas from shrinking on demo mode -->
    <p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p>
    <script type="text/javascript">
      $(document).ready(function(){ puzzleInit(); });
    </script>
  </body>
</html>

