<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./puzzles.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:Bold,400|Hina+Mincho"/>
    <script type="application/javascript" src="./fastclick.js"></script>
    <script type="text/javascript" src="./render.js"></script>
    <script type="text/javascript" src="./skpuzzles.js"></script>
    <script type="text/javascript" src="./shikaku.js"></script>
    <script src="./jquery.js"></script>
    <title>Shikaku Player</title>
  </head>
  <body>
    <div id="banner">
      <a href="index.html">Ohmec Puzzles</a><br/>
      Player for Shikaku <span id="jpfont">&#x56DB;&#x89D2;&#x306B;&#x5207;&#x308C;</span>
    </div>
    <div id="tabContainer">
      <ul id="tabs">
        <li class="active"><a href="#tab1">Game Play   </a></li>
        <li>               <a href="#tab2">Rules       </a></li>
        <li>               <a href="#tab3">Puzzles     </a></li>
        <li>               <a href="#tab4">About       </a></li>
      </ul>
    </div>
    <div id="tabsContent">
      <div id="tab1" class="tab_content" style="display: block;">
        <p>
          In the game Shikaku, the goal is to draw rectangular borders
          around cells of the size equal to a circled number enclosed
          (see Rules tab). To play, use the mouse or arrow keys to draw
          the borders, or rooms:
          <ul>
            <li>
              You can begin to draw a rectangle from any cell. With the
              mouse, <b>left-click and hold</b> to begin the rectangle,
              then <b>drag</b> the mouse in the shape desired. For
              instance, if you want a 2-high 3-wide rectangle over a
              cell with a '6' in it, click on the cell describing the
              upper left of the rectangle, then move the mouse two cells
              to the right and down 1 to make the 2x3 rectangle.  While
              the mouse is down you can change the shape as desired.
            </li>
            <li>
              A <b>right-click</b> within a room removes any prior borders
              and starts anew.  The drawing tool will not allow you to
              create a room that conflicts with an existing room.
            </li>
            <li>
              In alternate to the mouse drag, you can do the same by moving
              around the board with the <b>arrow keys</b>, then pressing
              the <b>shift button</b> to start a rectangle shape,
              expanding it in any direction with the arrow keys.
            </li>
            <li>
              Pressing the <b>backspace</b> on a cell within a defined room
              clears its existing rectangle. It may not always be obvious that
              a room has been cleared if other rooms' borders coincide with
              the borders of the deleted room. (Assist mode below can help
              visualize drawn rooms.)
            </li>
          </ul>
        </p>
          In <b>Assist Mode</b> (0), the default, only the existance of errors
          or incomplete numbers is indicated.  In Assist Mode (1), the
          number of errors and incomplete numbers is indicated, see game
          rules.  In Assist Mode (2) completed rooms are colored green
          if they are of the correct size compared to the enclosed 
          number. Rooms with errors are colored red, for instance if they
          contain two numbers, no numbers, or are of the wrong size for
          the enclosed number. Note a green room is not by definition the
          correct final solution, only that it is created with the correct
          constraints.  In some cases the solve difficulty will greatly
          decrease in Assist Mode (1) or higher, so select depending upon
          the level of challenge desired.  The game border will turn green
          if the grid is completed without error.  You can click the "undo"
          button on the bottom of the page to undo previous moves.
        </p>
        <p>
          Below, enter <b>puzzle code (0-<span id='puzzlecount1'>0</span>)</b>
          for one of a list of pre-defined puzzles, or a puzzle descriptor
          (see "Puzzles" tab). <b>Puzzle code 0</b> shows an example completed
          puzzle that can be helpful. The following puzzle codes have <b>demos</b>,
          which will walk you through a solve to help you on the path to
          mastery: <span id='demolist1'>[]</span>).
        </p>
      </div>
      <div id="tab2" class="tab_content" style="display: none;">
        <a href="https://www.nikoli.co.jp/en/puzzles/shikaku" target="_blank">Shikaku</a>
        (<span id="jpfont">&#x56DB;&#x89D2;&#x306B;&#x5207;&#x308C;</span>
        <i>Shikaku ni Kire</i>; or "Divide By Box") is a logic puzzle published by 
        <a href="https://www.nikoli.co.jp/en" target="_blank">Nikoli</a>.
        In Shikaku, the board begins with many cells containing numbers in
        black circles. These numbers indicate the size of a rectangular "room"
        that must be drawn around it.  The full set of rules below relate
        to those numbers and how to complete the puzzle.
        <ol>
          <li>
            All numbered cells must be contained within a drawn rectangular
            room containing the same number of cells as the number.
          </li>
          <li>
            No room can contain two numbers, nor no numbers.
          </li>
      </div>
      <div id="tab3" class="tab_content" style="display: none;">
        <p>
          Puzzles can be invoked by either a numerical entry from
          <b>0-<span id='puzzlecount2'>0</span></b>, or through a character
          description of the puzzle itself, entered into the Display
          form on the 'Game Play' tab. The numbered puzzles are
          hand-crafted of varying difficulty, roughly easy to hard.
          <b>Puzzle 0</b> shows a completed correct puzzle.
        </p>
        <p>
          To describe a puzzle, the character string must be of the
          form: "WxH:&lt;digit-descriptor&gt;", where W is a number
          indicating the width of the grid, and H the height.
          The digit descriptor is a list of the pre-defined
          numbered cells, from left to right, then top to bottom.
          Blank cells are represented with a '-' character. To assist
          in the definition of a sparse board, a combination of <i>b</i>
          consecutive blanks can be represented with a lowercase letter
          from 'a' to 'z', corresponding to 1 to 26 consecutive blanks.
          Number values greater than '9' should be represented with
          capital letters 'A' to 'Z' representing 10 to 35.  A dot '.'
          can be used as a visual separator, for example between rows.
          An example descriptor is as follows for entry 1:
          '<span id="descr1">descr</span>'.
        </p>
        <p>
          For Shikaku there are <span id='democount'>1</span> demo
          puzzles that can be helpful to walk through solving methods.
          They are puzzle codes <span id='demolist2'>[]</span>.
          Enter them in the Game Play tab with the code number and there
          will be added a demo panel to help with the solve.
        </p>
      </div>
      <div id="tab4" class="tab_content" style="display: none;">
        This playground was written using javascript and is available open
        source. All code is checked into the github repo at
        <a href="https://github.com/ohmec/puzzles">ohmec/puzzles</a>.
        Feel free to file bugs there!
      </div>
    </div>
    <div id="puzzleEntry">
      <center>
      <input type="text"                          id="userPuzzle"    size="40" />
      <input type="button" value="Display Puzzle" id="displayButton" class="button small" />
      </center>
    </div>
    <br />
    <div id="puzzleInterface">
      <div id="canvasDiv" style="border-color: black;">
        <canvas id="puzzleCanvas" class="fastclick" height="270" width="270" style="border-color: black;"></canvas>
      </div>    
      <br />
      <script type="text/javascript">
        let canvas = document.querySelector(".fastclick");
        new FastClick(canvas);
      </script>
      <br />
      <div id="buttonsDiv">
        <input class="button small" type="button" value="Undo"  id="undoButton"  />
        <input class="button small" type="button" value="Reset" id="resetButton" />
        <input class="button small" type="button" value="Current Assist Mode (0)" id="assistButton" />
        <input class="button small" type="button" value="Clear Ribbons" id="clearButton" style="display: none" />
        <p><span id='puzzledescr'></span></p>
        <p><span id='errortext'></span></p>
      </div>
    </div>
    <div id="demotab" style="display: none;">
      <input class="button small" type="button" value="prev" id="prevDemoButton"  />
      <input class="button small" type="button" value="next" id="nextDemoButton" />
      <p id='demop'><span id='demotext'></span></p>
    </div>
    <div id="ribbonbar">
      &nbsp;
    </div>
    <!-- some space to avoid the canvas from shrinking on demo mode -->
    <p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p>
    <script type="text/javascript">
      $(document).ready(function(){ puzzleInit(); });
    </script>
  </body>
</html>

